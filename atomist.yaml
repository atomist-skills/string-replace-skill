skill:
  description: Automatically replace strings in files based on a regular expression
  category:
    - DEV_EX
  video: 'https://images.atomist.com/skills/string-replace.gif'
  package:
    use: atomist/package-cljs-skill
  repository: 'https://github.com/atomist-skills/string-replace-skill'
  license: Apache-2.0
  homepage: 'https://github.com/atomist-skills/string-replace-skill'
  name: atomist/string-replace-skill
  long_description: >
    Automatically replace strings in files based on a regular expression.

    - Update configuration, code, documentation or any file in your codebase

    - Rename packages across an entire codebase

    - Update information needing periodic revision like dates, licenses, comment
    blocks
  icon: 'https://images.atomist.com/rug/regex.png'
  title: String Replace
  author: Atomist
  dispatch: multiple
  runtime:
    name: nodejs10
    entry_point: eventhandler
    memory: 1024
    timeout: 120
commands:
  - name: StringReplaceSkill
    description: Invoke the StringReplaceSkill on a linked repository
    pattern: ^string-replace .*$
  - name: FindUrlSkill
    description: Find all urls in the codebase
    pattern: ^find-by-regex .*$
parameters:
  - string:
      description: >-
        Enter comma-separated glob patterns.  If no glob pattern is entered, the
        string replacement will run on all the files in the selected
        repositories.
      displayName: Replace in files
      name: glob-pattern
      placeHolder: 'README.md,**/*.html'
      required: false
  - string:
      description: Enter string replacement expression (supports only the 'g' option)
      displayName: Substitution expression
      name: expression
      placeHolder: s/search/replace/g
      pattern: s/.*/.*/g?
      required: true
  - single_choice:
      name: update
      display_name: Update Strategy
      description: Select how updates should be applied
      options:
        - text: Raise Pull Requests on default branch only
          value: pr_default
        - text: Raise Pull Requests for all branches
          value: pr
      required: true
      defaultValue: pr_default
  - schedule:
      description: Run this regex on every Push OR provide a cron schedule.
      displayName: Cron Schedule
      name: schedule
      required: false
  - repoFilter:
      description: The set of Repositories for this String Replace rule.
      displayName: Which repositories
      name: scope
      required: false
